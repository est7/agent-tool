---
description: "量化分析项目技术债务，生成健康评分和改进优先级"
argument-hint: "<可选：项目路径或关注领域>"
---

# 技术债务分析 (Tech Debt Analysis)

量化评估项目技术债务，计算健康分数，生成基于 ROI 的改进优先级。

## 分析维度

### 1. 依赖健康度 (Dependency)
- 过期依赖数量和严重程度
- 已知安全漏洞 (CVE)
- 废弃包和替代方案

### 2. 文档完整度 (Documentation)
- README 和 API 文档覆盖
- 代码注释质量
- 架构决策记录 (ADR)

### 3. 测试覆盖率 (Testing)
- 单元测试覆盖率 (目标 >60%)
- 集成测试完整性
- 关键路径测试缺失

### 4. 安全态势 (Security)
- OWASP Top 10 风险
- 敏感信息暴露
- 认证/授权漏洞

### 5. 架构质量 (Architecture)
- 循环依赖
- 分层违规
- 模块耦合度

### 6. 代码质量 (Code Quality)
- 圈复杂度 (目标 <10)
- 重复代码率
- 代码异味 (Code Smells)

## 健康评分

```
┌─────────────────────────────────────────┐
│  项目健康度: 65/100  ⚠️ 需要改进        │
├─────────────────────────────────────────┤
│  依赖健康   ████████░░  80              │
│  文档完整   ████░░░░░░  40              │
│  测试覆盖   ██████░░░░  55              │
│  安全态势   ███████░░░  70              │
│  架构质量   ██████░░░░  60              │
│  代码质量   ███████░░░  70              │
├─────────────────────────────────────────┤
│  30天趋势: ↗️ +5                         │
└─────────────────────────────────────────┘
```

评分标准：
- **70+**: 健康
- **50-69**: 需要关注
- **<50**: 需要立即改进

## 影响量化

技术债务对开发效率的具体影响：

| 指标 | 当前影响 | 说明 |
|------|----------|------|
| 开发速度 | -20% | 新功能开发耗时增加 |
| Bug 修复 | +30% | 定位和修复时间延长 |
| Code Review | +25% | 审查复杂度增加 |
| 新人上手 | +50% | 理解代码库时间延长 |

## 优先级矩阵

**优先级公式**: `Priority = (Impact × Frequency) ÷ Fix Cost`

| 优先级 | 响应时间 | 说明 |
|--------|----------|------|
| **P0** | 立即修复 | 安全漏洞、生产阻塞 |
| **P1** | 本周内 | 高影响、低成本 |
| **P2** | 本月内 | 中等影响、合理成本 |
| **P3** | 本季度 | 低影响或高成本 |

## ROI 计算示例

```markdown
### 改进项: 解决循环依赖

- **投入**: 16 小时
- **收益**:
  - 编译时间: -30% (每次节省 2 分钟)
  - 调试效率: +40%
  - 模块独立部署能力
- **3个月 ROI**: 337%

### 改进项: 补充单元测试

- **投入**: 40 小时
- **收益**:
  - Bug 修复时间: -25%
  - 重构信心: +50%
  - 回归风险: -60%
- **3个月 ROI**: 180%
```

## 输出格式

```markdown
## 技术债务报告: {project_name}

### 执行摘要
- 健康评分: {score}/100
- 主要风险: {top_risks}
- 建议投入: {hours} 小时/季度

### 详细评估
#### 依赖健康
...

#### 测试覆盖
...

### 改进计划
| 优先级 | 项目 | 投入 | ROI | 负责人 |
|--------|------|------|-----|--------|
| P0 | ... | ... | ... | ... |
| P1 | ... | ... | ... | ... |

### 长期建议
...
```
